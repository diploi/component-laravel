diploiVersion: v1.0
type: component
name: Laravel
description: Official Diploi component for Laravel

parameterGroups:
  - name: Laravel Environment Variables
    identifier: LARAVEL_ENV
    description: Laravel application environment variables
    parameters:
      - name: AppName
        identifier: APP_NAME
        defaultValue: Laravel
        type: string
      - name: AppEnv
        identifier: APP_ENV
        defaultValue: local
        type: string
      - name: AppKey
        identifier: APP_KEY
        defaultValue: "base64:QKSsyj5wEfP5vQrGKljJ3Hck0p36LqUkxG54bESiD/M="
        type: secret
        description: Laravel application encryption key
      - name: AppDebug
        identifier: APP_DEBUG
        defaultValue: 'true'
        type: string
        description: Enable/disable debug mode
      - name: AppUrl
        identifier: APP_URL
        defaultValue: http://localhost
        type: string
        description: Application URL
        readOnly: true

contexts:
  - name: app
    identifier: app

hosts:
  - name: Laravel
    identifier: app
    urlFormat: '[label].[default-domain]'

connectionStrings:
  - name: Internal Address
    value: http://app.${DIPLOI_NAMESPACE}:8000
    description: This address is for requests from within the deployment and is inaccessible externally.

images:
  - identifier: app
    prebuildImage: ghcr.io/diploi/component-laravel:[tag]

logs:
  - name: Laravel Log
    type: log
    labelSelector: app=app